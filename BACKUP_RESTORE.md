# Backup / Restore Strategy

## 1. Что бэкапим

1. Supabase таблицы:
- `attendpro_accounts`
- `attendpro_report_runs`

2. Локальная конфигурация сервера:
- `.env` (в безопасном секрет-хранилище, не в Git)

3. Пользовательский JSON-бэкап из UI AttendPro (периодически).

## 2. Рекомендуемая периодичность

1. Supabase автоматические backups/PITR: ежедневно (или чаще).
2. Ручной JSON экспорт из UI: минимум 1 раз в неделю и перед крупными изменениями.
3. Проверка восстановления: минимум 1 раз в месяц.

## 3. Восстановление из Supabase

1. Открыть Supabase Dashboard.
2. Перейти в Backup/PITR.
3. Выбрать точку восстановления по времени.
4. Выполнить restore в отдельный проект (рекомендуется) или в текущий после окна обслуживания.
5. Проверить `attendpro_accounts` и `attendpro_report_runs`.

## 4. Восстановление из JSON (UI)

1. Войти в аккаунт AttendPro.
2. Открыть раздел экспорта/импорта.
3. Выбрать JSON-файл бэкапа.
4. Дождаться сообщения об успешном восстановлении.
5. Выполнить ручную синхронизацию с облаком.

## 5. Контроль после восстановления

1. Проверить `/api/health`.
2. Проверить ручную отправку отчета в Telegram.
3. Проверить корректность карточек, групп, посещаемости и расчетов зарплаты.
